<!DOCTYPE html>
<html lang="mg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi.M.Mi - Login Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        :root { --pink: #e91e63; --blue: #0d6efd; --dark: #0f0f0f; }
        body { background: var(--dark); color: white; min-height: 100vh; display: flex; align-items: center; font-family: 'Poppins', sans-serif; }
        .auth-container { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.1); border-radius: 35px; padding: 40px; width: 100%; max-width: 420px; margin: auto; box-shadow: 0 25px 50px rgba(0,0,0,0.5); }
        .form-control { 
            background: rgba(255,255,255,0.08) !important; 
            border: 1px solid #444 !important; 
            color: #ffffff !important; 
            border-radius: 15px; padding: 15px; margin-bottom: 20px; 
        }
        .form-control::placeholder { color: rgba(255,255,255,0.7) !important; font-weight: 300; }
        .btn-main { background: linear-gradient(45deg, var(--pink), var(--blue)); border: none; border-radius: 15px; padding: 15px; font-weight: bold; color: white; width: 100%; transition: 0.3s; }
        .btn-main:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(233, 30, 99, 0.4); }
        .logo-glow { width: 100px; height: 100px; object-fit: cover; border: 3px solid var(--pink); box-shadow: 0 0 20px var(--pink); }
    </style>
</head>
<body>
    <div class="container">
        <div class="auth-container animate__animated animate__fadeIn text-center">
            <img src="/logo.jpg" class="rounded-circle logo-glow mb-3">
            <h2 class="fw-bold animate__animated animate__pulse animate__infinite" style="color: var(--pink);">Mi.M.Mi</h2>
            <p class="text-white-50 small mb-4">Mivavaka • Miray Hina • Mifankatia</p>

            <div id="loginForm">
                <input type="text" id="lTel" class="form-control" placeholder="Laharana finday">
                <input type="password" id="lPass" class="form-control" placeholder="Tenimiafina">
                <button onclick="login()" class="btn btn-main">HIDITRA</button>
                <a href="javascript:void(0)" onclick="toggleF()" class="d-block mt-3 text-decoration-none small" style="color: var(--pink);">HIKATRA ANARANA ETO</a>
            </div>

            <div id="signupForm" style="display:none;">
                <input type="text" id="sName" class="form-control" placeholder="Anarana feno">
                <input type="text" id="sTel" class="form-control" placeholder="Laharana finday">
                <input type="text" id="sAddr" class="form-control" placeholder="Adiresy fonenana">
                <input type="password" id="sPass" class="form-control" placeholder="Tenimiafina vaovao">
                <button onclick="register()" class="btn btn-main">HISORATRA ANARANA</button>
                <a href="javascript:void(0)" onclick="toggleF()" class="d-block mt-3 text-decoration-none small text-white-50">Efa manana kaonty? Miditra</a>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        function toggleF() { $('#loginForm, #signupForm').toggle(); }
        function login() {
            const tel = $('#lTel').val(); const pass = $('#lPass').val();
            $.get('/api/members', function(users) {
                const user = users.find(u => u.tel === tel && u.pass === pass);
                if(user) { localStorage.setItem('userMimi', JSON.stringify(user)); location.href = '/dashboard'; }
                else { alert("Diso ny fidirana!"); }
            });
        }
        function register() {
            const data = { anarana: $('#sName').val(), tel: $('#sTel').val(), adiresy: $('#sAddr').val(), pass: $('#sPass').val() };
            $.ajax({ url: '/api/register', type: 'POST', contentType: 'application/json', data: JSON.stringify(data), success: function(res) {
                localStorage.setItem('userMimi', JSON.stringify(res.user)); location.href = '/dashboard';
            }});
        }
    </script>
</body>
</html>

